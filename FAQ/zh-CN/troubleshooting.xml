<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<qandaset defaultlabel="number">
  <qandaentry>
    <question>
      <para>
        eayun ovirt 的基本组件有哪些, 版本号分别是什么?
      </para>
    </question>
    <answer>
      <para>基本的组件有以下:</para>
      <para>基本系统: centos 6.5</para>
      <para>ovirt engine 版本: 3.3.1</para>
      <para>vdsm: 4.13</para>
      <para>kernel: 2.6.32-431</para>
      <para>qemu-kvm: 0.12.1.2-2.415</para>
    </answer>
  </qandaentry>

  <qandaentry>
    <question>
      <para>
        在管理端添加主机失败怎么办?
      </para>
    </question>
    <answer>
      <para>如果是在中文环境下, 请把语言切换到英文环境再添加, 如果还失败, 请联系客服人员</para>
    </answer>
  </qandaentry>

  <qandaentry>
    <question>
      <para>
        如果浏览器不能访问了怎么办?
      </para>
    </question>
    <answer>
      <para>用 ssh 登录到 ovirt engine, 查看一下 /etc/sysconfig/iptables 文件的开头是否如下:</para>
      <para># Generated by ovirt-engine installer</para>
      <para>如果给文件开头不是这样的内容, 或者是如下内容:</para>
      <para># oVirt default firewall configuration. Automatically generated by vdsm bootstrap script.</para>
      <para>请修改 /etc/sysconfig/iptables, 内容参考<ulink url="https://gist.github.com/mathslinux/9224947">这里</ulink>, 然后重启 iptables:</para>
      <programlisting language="Bash">
# service iptables restart
      </programlisting>
      <para>如果问题还存在, 请关闭 iptables:</para>
      <programlisting language="Bash">
# service iptables stop
      </programlisting>
      <para>并联系客服人员</para>
    </answer>
  </qandaentry>

  <qandaentry>
    <question>
      <para>
        把一台 manager 也配置为 node 节点, 重启后管理界面访问不了, 怎么修复?
      </para>
    </question>
    <answer>
      <para>这是因为 node 的防火墙规则覆盖了 manager 的防火墙规则, 导致 http/https 端口被阻拦了, 只要 add host 的时候不要勾选"设置防火墙"选项就没有该问题</para>
    </answer>
  </qandaentry>

  <qandaentry>
    <question>
      <para>
        add host 的时候失败怎么办?
      </para>
    </question>
    <answer>
      <para>首先, 请确保 host 的 ssh 服务是开启的, 如果没有开启, add host 是不会成功的</para>
    </answer>
  </qandaentry>

  <qandaentry>
    <question>
      <para>
        为什么在管理界面的虚拟机页面上不能显示虚拟机的 IP 地址和安装的应用程序?
      </para>
    </question>
    <answer>
      <para>管理端获取虚拟机的 IP 地址等信息是通过虚拟机里面的一个叫 "OVirt Guest Agent" 的代理程序实现的, 请先安装这个程序, 具体的安装信息如下:
	  <itemizedlist>
		<listitem>
		  <para>如果虚拟机系统是 ubuntu:
		  </para>
		</listitem>
	  </itemizedlist>
	  <programlisting language="Bash">
# wget https://launchpad.net/~zhshzhou/+archive/vdsm-ubuntu/+files/ovirt-guest-agent_1.0.8.201309301944.gitb7f8f2-1ppa1_all.deb
# dpkg -i ovirt-guest-agent_1.0.8.201309301944.gitb7f8f2-1ppa1_all.deb
# apt-get -f install
	  </programlisting>

	  <itemizedlist>
		<listitem>
		  <para>如果虚拟机系统是 centos/fedora:
		  </para>
		</listitem>
	  </itemizedlist>
	  <programlisting language="Bash">
# yum install http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
# yum install -y ovirt-guest-agent
	  </programlisting>

	  <itemizedlist>
		<listitem>
		  <para>如果虚拟机系统是 windows:
		  </para>
		</listitem>
	  </itemizedlist>
	  请按照 <ulink url="http://www.ovirt.org/OVirt_Guest_Agent_For_Windows">这个页面</ulink> 安装 agent, 或者联系易云的客服人员提供安装包
	  </para>
    </answer>
  </qandaentry>

  <qandaentry>
    <question>
      <para>
        为什么在管理界面上关机需要点击两次才能关机?
      </para>
    </question>
    <answer>
      <para>从管理界面关机的原理是这样的, 第一次关机的时候, 会向虚拟机代理程序发送一个关机的指令, 如果虚拟机没有安装代理程序, 那么这次指令发送就失败, 当你第二次点击关机按钮的时候, 虚拟机管理程序会直接发送电源关闭事件, 类似于在你的 pc 机器上按按强制关闭按钮, 所以, 为了方便的管理你的虚拟机, 建议你在虚拟机里面安装 "Ovirt Guest Agent", 安装细节参照上一条说明</para>
    </answer>
  </qandaentry>
</qandaset>
