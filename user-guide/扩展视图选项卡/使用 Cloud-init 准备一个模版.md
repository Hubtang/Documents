# 使用 Cloud-init 准备一个模版

**概述**<br/>
使用 Cloud-Init 在一个模板中包括一组标准的设置。

> **注意**
>
> 以下介绍了在准备模板时如何使用 Cloud-Init 的方法。其中的设置也出现在新建虚拟机和编辑模板窗口中。

**使用 Cloud-Init 准备一个模板**
1. 选**虚拟机**标签页并选择一个虚拟机。

2. 点**编辑**键打开**编辑虚拟机**窗口。

3. 点**初始运行**标签页，选择使用 **Cloud-Init/Sysprep** 选项。

4. 在**虚拟机主机名**项中输入主机名。

5. 选中**配置时区**并从**时区**下拉菜单中选择所需的时区。

6. 展开**验证**项，您可以选中**使用已经配置的密码**选项来使用已经存在的密码来进行验证；也可以不选择它而在**根密码**和**验证根密码**项中设置一个新的根密码。

7. 在**SSH 授权密钥**项中输入 SSH 密钥，这个密钥会被添加到虚拟机的授权主机文件中。

8. 选中**重新产生 SSH 密钥**选项来为虚拟机重新产生 SSH 密钥。

9. 展开**网络**项，在 **DNS 服务器**项中输入 DNS 服务器。

10. 在 **DNS 搜索域**中输入 DNS 搜索域。

11. 选中**网络**，并使用 **+** 和 **-** 键来为虚拟机添加网络接口或从虚拟机上删除网络接口。

12. 展开**自定义脚本**，在**自定义脚本**项中输入自定脚本。

13. 点**确定**。

> **重要**
>
> Cloud-Init 只在兼容版本为 3.3 或更高版本的集群中被支持。

**结果**<br/>
在虚拟机启动时进行了特定的配置
