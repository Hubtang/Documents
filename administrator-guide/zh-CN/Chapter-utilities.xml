<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "administrator-guide.ent">
%BOOK_ENTITIES;
]>
<chapter id="chap-Documents-administrator-guide-Chapter-utilites">
	<title>实用工具</title>
	<section id="sect-Documents-administrator-guide-Chapter-utilites_Section_1">
		<title>&OVIRT;&MANAGER;重命名工具</title>
        <section id=
            "sect-Documents-administrator-guide-Chapter-utilites_Section_1_1">
            <title>关于&OVIRT;&MANAGER;重命名工具</title>
            <para>在初始环境下运行engine-setup命令，会根据安装过程中提供的fqdn域
                名生成一系列证书和密钥。如果后期需要修改&MANAGER;的fqdn域名（例
                如，将&MANAGER;迁移到另一个网络环境），需要使用
                ovirt-engine-rename命令完成所有相关的调整。
            </para>
        </section>
        <section id=
            "sect-Documents-administrator-guide-Chapter-utilites_Section_1_2">
            <title>使用&OVIRT;&MANAGER;重命名工具</title>
            <simplesect>
                <title>说明：</title>
                <para>使用ovirt-engine-rename命令更新&MANAGER;的fqdn域名记录。
                </para>
                <procedure>
                    <title>&OVIRT;&MANAGER;重命名</title>
                    <step>
                        <para>在DNS系统中准备好&MANAGER;新的fqdn域名记录以及其他
                            相关记录。
                        </para>
                    </step>
                    <step>
                        <para>如果使用DHCP，修改DHCP配置。
                        </para>
                    </step>
                    <step>
                        <para>修改&MANAGER;服务器的主机名。
                        </para>
                    </step>
                    <step>
                        <para>执行下面的命令：
<screen># /usr/share/ovirt-engine/setup/bin/ovirt-engine-rename
</screen>
                        </para>
                    </step>
                    <step>
                        <para>出现下面的提示时，按下回车键，关闭&MANAGER;：
<screen>During execution engine service will be stopped (OK, Cancel) [OK]:
</screen>
                        </para>
                    </step>
                    <step>
                        <para>出现下面的提示时，输入新的fqdn域名：
<screen>New fully qualified server name:[new name]
</screen>
                        </para>
                    </step>
                </procedure>
                <note>
                    <para>ovirt-engine-rename支持--name参数，参数后面直接指定
                        &MANAGER;新的fqdn域名，可以省去后面提示输入域名的步骤，
                        如：
<screen># /usr/share/ovirt-engine/setup/bin/ovirt-engine-rename \
--name=[new name]
</screen>
                    </para>
                </note>
            </simplesect>
            <simplesect>
                <title>预期结果：</title>
                <para>ovirt-engine-rename会修改以下文件关联的&MANAGER;域名：
                    <itemizedlist>
                        <listitem><simpara>
                                /etc/ovirt-engine/engine.conf.d/10-setup-protocols.conf
                        </simpara></listitem>
                        <listitem><simpara>
                                /etc/ovirt-engine/imageuploader.conf.d/10-engine-setup.conf
                        </simpara></listitem>
                        <listitem><simpara>
                                /etc/ovirt-engine/isouploader.conf.d/10-engine-setup.conf
                        </simpara></listitem>
                        <listitem><simpara>
                                /etc/ovirt-engine/logcollector.conf.d/10-engine-setup.conf
                        </simpara></listitem>
                        <listitem><simpara>
                                /etc/pki/ovirt-engine/cert.conf
                        </simpara></listitem>
                        <listitem><simpara>
                                /etc/pki/ovirt-engine/cert.template
                        </simpara></listitem>
                        <listitem><simpara>
                                /etc/pki/ovirt-engine/certs/apache.cer
                        </simpara></listitem>
                        <listitem><simpara>
                                /etc/pki/ovirt-engine/keys/apache.key.nopass
                        </simpara></listitem>
                        <listitem><simpara>
                                /etc/pki/ovirt-engine/keys/apache.p12
                        </simpara></listitem>
                    </itemizedlist>
                </para>
            </simplesect>
        </section>
	</section>
	
    <section id="sect-Documents-administrator-guide-Chapter-utilites_Section_2">
        <title>&OVIRT;域管理工具</title>
        <section id=
            "sect-Documents-administrator-guide-Chapter-utilites_Section_2_1">
            <title>关于&OVIRT;域管理工具</title>
            <para>&OVIRT;虚拟化环境使用目录服务对于用户进行管理和验证。要在
                &OVIRT;虚拟化环境中添加用户，首先通过admin@internal用户为
                &MANAGER;配置目录服务。添加、删除目录服务时使用
                engine-manage-domains命令。
            </para>
            <para>只有&OVIRT;&MANAGER;服务器上安装了engine-manage-domains命令，
                该命令必须由root用户执行。
            </para>
        </section>

        <section id=
            "sect-Documents-administrator-guide-Chapter-utilites_Section_2_2">
            <title>&OVIRT;域管理工具的命令行说明</title>
            <para>命令的使用方法如下：
                <synopsis>
                    engine-manage-domains -action=ACTION [options]
                </synopsis>
                可用的操作（ACTION）有：
                <variablelist>
                    <varlistentry>
                        <term>add</term>
                        <listitem>
                            <para>为&OVIRT;&MANAGER;添加目录服务。
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>edit</term>
                        <listitem>
                            <para>编辑&OVIRT;&MANAGER;中的目录服务。
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>delete</term>
                        <listitem>
                            <para>为&OVIRT;&MANAGER;删除目录服务。
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>validate</term>
                        <listitem>
                            <para>验证&OVIRT;&MANAGER;中的目录服务。该操作会使用
                                之前配置的用户和密码对所有目录服务进行验证尝试。
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>list</term>
                        <listitem>
                            <para>列出&OVIRT;&MANAGER;中的目录服务。
                            </para>
                        </listitem>
                    </varlistentry>
                </variablelist>
                其他的命令行选项要配合操作一同使用：
                <variablelist>
                    <varlistentry>
                        <term>-domain=DOMAIN</term>
                        <listitem>
                            <para>制定要进行操作的域。对于add、edit和delete操作
                                -domain是必须指定的。
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>-provider=PROVIDER</term>
                        <listitem>
                            <para>指定目录服务的类型，支持的目录服务有：
                                <itemizedlist>
                                    <listitem>
                                        <para>ActiveDirectory - Active Directory
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>IPA - Identity Management（IdM）
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>RHDS - Red Hat Directory Service。
                                            RHDS不使用Kerberos，而&OVIRT;虚拟化
                                            环境要求使用Kerberos，因此使用RHDS时
                                            需要配置Kerberos域中的一个目录服务。
                                            <note>
                                                <para>使用RHDS时必须安装memberof
                                                    插件，使用memeberof插件要求
                                                    用户都是inetuser用户。
                                                </para>
                                            </note>
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>-user=USER</term>
                        <listitem>
                            <para>指定目录服务的用户。在add操作中-user选项是必需
                                的，edit操作则可以不会指定。
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>-passwordFile=FILE</term>
                        <listitem>
                            <para>指定密码文件，目录服务用户的密码在该文件的第一
                                行。执行add操作时，-passwordFile或者-interactive
                                选项必须使用其中一个。
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>-addPermissions</term>
                        <listitem>
                            <para>为指定的域用户赋予在&OVIRT;&MANAGER;中的
                                SuperUser角色。默认的情况下，没有启用这一选项，
                                指定的域用户不会获得SuperUser的角色。在add和edit
                                操作中可以选择使用-addPermissions选项。
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>-interactive</term>
                        <listitem>
                            <para>指定域用户的密码是否手动（交互式）地提供。在
                                add操作中，该选项和-passwordFile必须选择其中一个
                                使用。
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>-configFile=FILE</term>
                        <listitem>
                            <para>指定命令配置文件的路径。不使用默认配置文件时，
                                使用该选项。
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>-report</term>
                        <listitem>
                            <para>该选项和validate操作一起使用时，会生成在验证过
                                程发生的所有错误信息的报告。
                            </para>
                        </listitem>
                    </varlistentry>
                </variablelist>
            </para>
            <para>engine-manage-domains使用方法的完整说明也可以通过下面的命令获
                取：
                <screen># engine-manage-domains --help
                </screen>
            </para>
        </section>

        <section id=
            "sect-Documents-administrator-guide-Chapter-utilites_Section_2_3">
            <title>使用&OVIRT;域管理工具</title>
            <para>后面几小节通过实际的例子对于&OVIRT;域管理工具的使用方法进行了
                说明。
            </para>
        </section>

        <section id=
            "sect-Documents-administrator-guide-Chapter-utilites_Section_2_4">
            <title>添加目录服务</title>
            <para>本例中，engine-manage-domains将IdM域demo.eayunos.eayun.com添加
                到&OVIRT;&MANAGER;中。使用的用户是eayunos，密码是手动提供的。
                <example>
                    <title>engine-manage-domains的add操作</title>
<screen>
# engine-manage-domains -action=add -domain=demo.eayunos.eayun.com \
-provider=IPA -user=eayunos -interactive
loaded template kr5.conf file
setting default_tkt_enctypes
setting realms
setting domain realm
success
User guid is: 6d580ef5-130a-4931-bcd0-23bd23028ece
Successfully added domain demo.eayunos.eayun.com. oVirt Engine restart is
required in order for the changes to take place (service ovirt-engine restart).
</screen>
                </example>
            </para>
        </section>

        <section id=
            "sect-Documents-administrator-guide-Chapter-utilites_Section_2_5">
            <title>修改目录服务</title>
            <para>本例中，engine-manage-domains对IdM域demo.eayunos.eayun.com的配
                置进行了更改。更改完成之后，&OVIRT;&MANAGER;查询目录服务时使用新
                的用户eayunos。命令执行时密码手动提供。
                <example>
                    <title>engine-manage-domains的edit操作</title>
<screen>
# engine-manage-domains -action=edit -domain=demo.eayunos.eayun.com \
-provider=IPA -user=eayunos -interactive
loaded template kr5.conf file
setting default_tkt_enctypes
setting realms
setting domain realm
success
User guid is: 6d580ef5-130a-4931-bcd0-23bd23028ece
Successfully added domain demo.eayunos.eayun.com. oVirt Engine restart is
required in order for the changes to take place (service ovirt-engine restart).
</screen>
                </example>
            </para>
        </section>

        <section id=
            "sect-Documents-administrator-guide-Chapter-utilites_Section_2_6">
            <title>删除目录服务</title>
            <para>本例中，engine-manage-domains从&OVIRT;&MANAGER;中删除IdM域
                demo.eayunos.eayun.com的配置。更改完成之后，&OVIRT;&MANAGER;中属
                于demo.eayunos.eayun.com的用户将无法登录，但是依然会保留在用户列
                表中，除非手动清理用户列表。
            </para>
            <para>本例中要删除的目录服务是&OVIRT;&MANAGER;中最后一个，所以命令执
                行过程中会给出一个警告，提醒用户最后一个目录服务删除之后，只有
                admin@internal用户可以登录到&MANAGER;，新的用户只能在添加新的目
                录服务之后手动添加。
                <example>
                    <title>engine-manage-domains的delete操作</title>
<screen>
# engine-manage-domains -action=delete -domain=demo.eayunos.eayun.com
WARNING: Domain directory.demo.redhat.com is the last domain in the
configuration. After deleting it you will have to either add another domain, or
to use the internal admin user in order to login.
Successfully deleted domain demo.eayunos.eayun.com. Please remove all users
and groups of this domain using the Administration portal or the API.
</screen>
                </example>
            </para>
        </section>

        <section id=
            "sect-Documents-administrator-guide-Chapter-utilites_Section_2_7">
            <title>验证目录服务</title>
            <para>本例中，engine-manage-domains对&OVIRT;&MANAGER;中的目录服务进
                行验证。验证方法是根据配置文件中每一个目录服务的验证信息进行登录
                尝试，如果成功登录则说明目录服务可用。
                <example>
                    <title>engine-manage-domains的validate操作</title>
<screen>
# engine-manage-domains -action=validate
Domain eayunos.eayun.com is valid.
The configured user for domain eayunos.eayun.com is eayunos@EAYUNOS.EAYUN.COM
Manage Domains completed successfully
</screen>
                </example>
            </para>
        </section>

        <section id=
            "sect-Documents-administrator-guide-Chapter-utilites_Section_2_8">
            <title>列出所有目录服务</title>
            <para>本例中，engine-manage-domains会列出&OVIRT;&MANAGER;中所有目录
                服务。命令结果会列出域名称，域用户（UPN，User Principal Name格
                式）。
                <example>
                    <title>engine-manage-domains的list操作</title>
<screen>
# engine-manage-domains -action=list
Domain: eayunos.eayun.com
    User name: eayunos@EAYUNOS.EAYUN.COM
    Manage Domains completed successfully
</screen>
                </example>
            </para>
        </section>
    </section>

    <section id="sect-Documents-administrator-guide-Chapter-utilites_Section_3">
        <title>&OVIRT;配置管理工具</title>
        <section id=
            "sect-Documents-administrator-guide-Chapter-utilites_Section_3_1">
            <title>关于&OVIRT;配置管理工具</title>
            <para>安装&OVIRT;&MANAGER;时自动对其中一些默认配置进行修改，调整
                &MANAGER;的配置项有专门的配置管理工具：engine-config。
            </para>
            <para>&OVIRT;配置管理工具并不依赖于&MANAGER;是否已经启动，配置项是保
                存在数据库的，因此只需要确保使用配置管理工具时数据库在正常运行。
                修改过的配置项在&MANAGER;重启之后生效。
            </para>
            <para>&OVIRT;&MANAGER;的配置项是一系列的key-value对。配置管理工具可
                以进行以下操作：
                <itemizedlist>
                    <listitem><simpara>
                        列出所有的配置项（key），
                    </simpara></listitem>
                    <listitem><simpara>
                        列出所有的配置项的值（value），
                    </simpara></listitem>
                    <listitem><simpara>
                        获取指定配置项的值，
                    </simpara></listitem>
                    <listitem><simpara>
                        修改指定配置项的值。
                    </simpara></listitem>
                </itemizedlist>
            </para>
            <para>&OVIRT;配置管理工具可以同时多份&MANAGER;的配置。指定配置的版本
                时，执行命令需要加上--cver参数，默认的配置的版本是general。
            </para>
        </section>

        <section id=
            "sect-Documents-administrator-guide-Chapter-utilites_Section_3_2">
            <title>&OVIRT;配置管理工具的命令行说明</title>
            <para>&OVIRT;&MANAGER;服务器上安装了配置管理工具，关于命令的详细说明
                可以执行下面的命令获取：
                <screen># engine-config --help
                </screen>
            </para>
            <simplesect>
                <title>常规操作</title>
                <variablelist>
                    <varlistentry>
                        <term>列出所有的配置项</term>
                        <listitem><para>使用--list选项可以列出所有的配置项
                                <screen># engine-config --list
                                </screen>
                                所有的配置项及其描述都会打印出来。
                        </para></listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>列出所有配置项的值</term>
                        <listitem><para>使用--all选项可以列出所有配置项的值
                                <screen># engine-config --all
                                </screen>
                                所有的配置项、配置项当前值以及配置版本都会打印出
                                来。
                        </para></listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>获取指定配置项的值</term>
                        <listitem><para>使用--get可以获取指定配置项的值
                                <screen># engine-config --get KEY_NAME
                                </screen>
                                将KEY_NAME替换为要查询的配置项。命令会打印出该配
                                置项，配置项当前值以及配置版本。要或者指定配置版
                                本中配置项的值，需要加上--cver选项。
                        </para></listitem>
                    </varlistentry>                    <varlistentry>
                        <term>设置指定配置项的值</term>
                        <listitem><para>使用--set可以设置指定配置项的值，要设置
                                指定配置版本中配置项的值，需要加上--cver选项。
<screen># engine-config --set KEY_NAME=KEY_VALUE --cver=VERSION
</screen>
                                将KEY_NAME替换为要设置的配置项，KEY_VALUE替换为
                                配置项的值，设置其他版本配置中的配置项时将
                                VERSION替换为配置的版本。
                        </para></listitem>
                    </varlistentry>
                </variablelist>
            </simplesect>
        </section>

        <section id=
            "sect-Documents-administrator-guide-Chapter-utilites_Section_3_3">
            <title>admin@internal用户</title>
            <para>安装&OVIRT;&MANAGER;时会自动创建admin@internal用户，用户信息保
                存在&MANAGER;自身的数据库中，其他用户则需要从目录服务中添加。和
                外部目录服务的用户域不同，internal域无法增加、删除用户。
                admin@internal用户在&OVIRT;&MANAGER;中拥有SuperUser角色，具有管
                理权限。
            </para>
            <para>admin@internal用户的密码在安装&MANAGER;的过程中设置，修改密码
                需要使用engine-config命令。
            </para>
        </section>

        <section id=
            "sect-Documents-administrator-guide-Chapter-utilites_Section_3_4">
            <title>修改admin@internal用户的密码</title>
            <procedure>
                <step>
                    <para>使用root用户登录到&OVIRT;&MANAGER;服务器。
                    </para>
                </step>
                <step>
                    <para>使用engine-config命令为admin@internal设置新的密码：
                        <screen># engine-config -s AdminPassword=interactive
                        </screen>
                        如果密码中有特殊字符，注意使用转义。
                    </para>
                </step>
                <step>
                    <para>重启&MANAGER;使新的密码生效：
                        <screen># service ovirt-engine restart
                        </screen>
                    </para>
                </step>
            </procedure>
        </section>

        <section id=
            "sect-Documents-administrator-guide-Chapter-utilites_Section_3_5">
            <title>配置管理工具使用示例</title>
            <example>
                <title>获取配置项的值</title>
<screen># engine-config --get=SearchResultsLimit --cver=general
100
</screen>
            </example>
            <example>
                <title>设置配置项的值</title>
<screen># engine-config --set SearchResultsLimit=50 --cver=general
</screen>
            </example>
        </section>

        <section id=
            "sect-Documents-administrator-guide-Chapter-utilites_Section_3_6">
            <title>&OVIRT;&MANAGER;配置项的说明、限制以及配置建议</title>
            <table>
                <title>&OVIRT;&MANAGER;配置项的说明、限制以及配置建议</title>
                <tgroup cols="5">
                    <thead><row>
                            <entry>配置项</entry>
                            <entry>说明</entry>
                            <entry>数据类型</entry>
                            <entry>建议值（或者默认值）</entry>
                            <entry>备注</entry>
                    </row></thead>
                    <tbody>
                        <row>
                            <entry>
                                AsyncTaskPolling&#x200B;Rate
                            </entry>
                            <entry>异步事务轮询频率</entry>
                            <entry>整数</entry>
                            <entry>10</entry>
                            <entry>&OVIRT;&MANAGER;查询异步事务状态的频繁程度
                            </entry>
                        </row>
                        <row>
                            <entry>
                                AsyncTaskZombie&#x200B;TaskLifeInMinutes
                            </entry>
                            <entry>僵尸事务的生命周期（分钟）</entry>
                            <entry>整数</entry>
                            <entry>3000</entry>
                            <entry>
                                事务执行多长时间之后会被认为是僵尸事务并被杀死。
                                该配置对大规模存储操作的影响需要特别考虑。如果存
                                储设备速度较慢而虚拟镜像体积较大，或者事务运行时
                                间超过3000分钟（50个小时），需要适量增大该配置。
                            </entry>
                        </row>
                        <row>
                            <entry>AttestationPort</entry>
                            <entry>attestation服务的端口</entry>
                            <entry>整数</entry>
                            <entry>8443</entry>
                            <entry>
                                attestation服务的监听端口。
                            </entry>
                        </row>
                        <row>
                            <entry>AttestationServer</entry>
                            <entry>attestation服务器的fqdn域名</entry>
                            <entry>字符串</entry>
                            <entry>默认是“oat-server”</entry>
                            <entry>
                                attestation服务器的fqdn域名或者ip地址。
                            </entry>
                        </row>
                        <row>
                            <entry>AttestationTrustst&#x200B;ore</entry>
                            <entry>
                                和attestation服务器进行加密通信时使用的
                                truststore文件。
                            </entry>
                            <entry>字符串</entry>
                            <entry>TrustStore.jks</entry>
                            <entry>
                                将attestation服务器
                                /var/lib/oat-appraiser/Certificate/目录下的
                                TrustStore.jks文件复制到&MANAGER;服务器的
                                /usr/share目录下。
                            </entry>
                        </row>
                        <row>
                            <entry>AttestationTrustst&#x200B;orePass</entry>
                            <entry>访问truststore的密码</entry>
                            <entry>字符串</entry>
                            <entry>password</entry>
                            <entry>默认的密码是password。</entry>
                        </row>
                        <row>
                            <entry>AttestationFirstSta&#x200B;geSize</entry>
                            <entry>第一阶段attestation的容量</entry>
                            <entry>整数</entry>
                            <entry>10</entry>
                            <entry>
                                快速初始化时使用的配置。除非有明确的原因，否则不
                                建议修改该配置。
                            </entry>
                        </row>
                        <row>
                            <entry>AuditLogAgingThr&#x200B;eshold</entry>
                            <entry>审计日志保存时限（以天为单位）</entry>
                            <entry>整数</entry>
                            <entry>30</entry>
                            <entry>
                                审计日志在截断轮转之前最长的保存时限。
                            </entry>
                        </row>
                        <row>
                            <entry>AuditLogCleanupT&#x200B;ime</entry>
                            <entry>检查审计是否需要清理的时间</entry>
                            <entry>时间</entry>
                            <entry>03:35:35</entry>
                            <entry>
                                检查审计日志是否超过时限以及是否需要清理。
                            </entry>
                        </row>
                        <row>
                            <entry>AuthenticationMet&#x200B;hod</entry>
                            <entry>&OVIRT;&MANAGER;中用户的验证方式</entry>
                            <entry>字符串</entry>
                            <entry>LDAP</entry>
                            <entry>
                                &OVIRT;&MANAGER;验证用户的方式，目前支持LDAP。
                            </entry>
                        </row>
                        <row>
                            <entry>
                            BlockMigrationOn&#x200B;SwapUsagePerce&#x200B;ntage
                            </entry>
                            <entry>
                                &NODE;服务器swap使用率的限制（作为调度的依据）
                            </entry>
                            <entry>整数</entry>
                            <entry>0</entry>
                            <entry>
                                &NODE;服务器上允许虚拟机运行或者迁移消耗的最大
                                swap使用率。如果服务器上swap使用率超过上限，虚拟
                                机或者虚拟机迁移不会启动。
                            </entry>
                        </row>
                        <row>
                            <entry>BootstrapMinimalV&#x200B;dsmVersion</entry>
                            <entry>支持的VDSM最低版本</entry>
                            <entry>字符串</entry>
                            <entry>4.9</entry>
                            <entry>
                                将主机加入到&MANAGER;时，主机上安装的VDSM版本必
                                须不低于配置项指定的版本。新版本的VDSM特性更丰
                                富。
                            </entry>
                        </row>
                        <row>
                            <entry>CABaseDirectory</entry>
                            <entry>CA证书的目录</entry>
                            <entry>字符串</entry>
                            <entry>/etc/pki/ovirt-&#x200B;engine</entry>
                            <entry>
                                &OVIRT;&MANAGER;服务器上CA证书所在的目录。
                            </entry>
                        </row>
                        <row>
                            <entry>CertificateFileNam&#x200B;e</entry>
                            <entry>证书文件的名称</entry>
                            <entry>字符串</entry>
                            <entry>
/etc/pki/ovirt-&#x200B;engine/certs/engin&#x200B;e.cer
                            </entry>
                            <entry>
                                &OVIRT;&MANAGER;进行SSL/TSL通信时使用的证书文
                                件。
                            </entry>
                        </row>
                        <row>
                            <entry>CpuOverCommitD&#x200B;urationMinutes</entry>
                            <entry>
                                CPU使用率超过集群调度策略的上限时，等待多长时间
                                才开始进行实际的调度操作（时间以分钟为单位）。
                            </entry>
                            <entry>整数</entry>
                            <entry>2</entry>
                            <entry>
                                当集群调度策略设置为even时，如果检测到主机CPU使
                                用超过配置上限，&MANAGER;会等待配置项设置的一段
                                时间之后才开始进行虚拟机迁移。
                            </entry>
                        </row>
                        <row>
                            <entry>DisableFenceAtSt&#x200B;artupInSec</entry>
                            <entry>
                                在&OVIRT;&MANAGER;启动时禁用fence操作一段时间（
                                以秒为单位）
                            </entry>
                            <entry>整数</entry>
                            <entry>300</entry>
                            <entry>
                                &OVIRT;&MANAGER;启动时对主机进行检测，如果主机没
                                有响应的时间超过该配置项设置的值，则认为主机的状
                                态为不可操作，并开始执行fence操作。如果&MANAGER;
                                服务器处于低速的网络环境，则需要考虑适量增大该配
                                置。
                            </entry>
                        </row>
                        <row>
                            <entry>WANDisableEffect&#x200B;s</entry>
                            <entry>使用SPICE连接虚拟机时关闭WAN特效</entry>
                            <entry>多个字符串</entry>
                            <entry>animation</entry>
                            <entry>
                                使用SPICE连接虚拟机时要关闭哪些特效。目前支持的
                                值有：animation、&#x200B;wallpaper、font-smooth
                                和all。
                            </entry>
                        </row>
                        <row>
                            <entry>WANColorDepth</entry>
                            <entry>使用SPICE连接虚拟机时使用的色深</entry>
                            <entry>整数</entry>
                            <entry>16</entry>
                            <entry>
                                使用SPICE连接虚拟机时使用的色深，可以配置的值有
                                16和32。
                            </entry>
                        </row>
                        <row>
                            <entry>
                            EnableSpiceRoot&#x200B;CertificateValidatio&#x200B;n
                            </entry>
                            <entry>是否启动SPICE客户端的根证书验证</entry>
                            <entry>字符串</entry>
                            <entry>true</entry>
                            <entry>
                                如果配置项的值为“true”，当客户端通过SPICE连接虚
                                拟机时，虚拟机所在主机的证书以及&MANAGER;的CA证
                                书都会发送到客户端，目的是提供额外的安全认证机
                                制。
                            </entry>
                        </row>
                        <row>
                            <entry>EnableUSBAsDef&#x200B;ault</entry>
                            <entry>是否自动将USB设备附加到虚拟机</entry>
                            <entry>字符串</entry>
                            <entry>true</entry>
                            <entry>-</entry>
                        </row>
                        <row>
                            <entry>EnableVdsLoadBa&#x200B;lancing</entry>
                            <entry>是否启用&NODE;负载均衡</entry>
                            <entry>字符串</entry>
                            <entry>true</entry>
                            <entry>
                                该配置项可以配置是否根据集群策略中配置的规则来进
                                行虚拟机的负载均衡调度。
                            </entry>
                        </row>
                        <row>
                            <entry>FreeSpaceCritical&#x200B;LowInGB</entry>
                            <entry>磁盘剩余空间警告阈值（以GB为单位）</entry>
                            <entry>整数</entry>
                            <entry>5</entry>
                            <entry>
                                当存储域的剩余空间减少到配置项指定的数值时产生一
                                个警告。该配置项也会在判断存储相关操作是否会超过
                                这个限制的过程中产生作用。添加或者导出磁盘镜像会
                                会因为剩余空间不足而失败。
                            </entry>
                        </row>
                        <row>
                            <entry>FreeSpaceLow</entry>
                            <entry>
                                磁盘剩余空间百分比低于配置值时会被认为是空间不足
                            </entry>
                            <entry>整数</entry>
                            <entry>10</entry>
                            <entry>
                                当存储域的剩余空间百分比减少到配置项指定的数值
                                时，存储域被认为是空间不足。
                            </entry>
                        </row>
                        <row>
                            <entry>
                                HighUtilizationFor&#x200B;EvenlyDistribute
                            </entry>
                            <entry>
                                使用even负载均衡策略时，运行虚拟机数目的上限
                            </entry>
                            <entry>整数</entry>
                            <entry>75</entry>
                            <entry>
                                使用even负载均衡策略时，每台主机运行虚拟机的最大
                                数量。
                            </entry>
                        </row>
                        <row>
                            <entry>HighUtilizationFor&#x200B;PowerSave</entry>
                            <entry>
                                使用PowerSave负载均衡策略时，主机CPU使用率的上限
                            </entry>
                            <entry>整数</entry>
                            <entry>75</entry>
                            <entry>
                                对于新创建的集群生效，使用PowerSave负载均衡策略
                                时，主机CPU使用率的上限。
                            </entry>
                        </row>
                        <row>
                            <entry>LDAPQueryTimeo&#x200B;out</entry>
                            <entry>LDAP查询超时时间</entry>
                            <entry>整数</entry>
                            <entry>30</entry>
                            <entry>
                                LDAP查询的超时限制，超过配置项指定的时间之后查询
                                会被终止。
                            </entry>
                        </row>
                        <row>
                            <entry>LDAPOperationTi&#x200B;meout</entry>
                            <entry>LDAP搜索操作的超时时间</entry>
                            <entry>整数</entry>
                            <entry>30</entry>
                            <entry>
                                LDAP搜索操作的超时限制，超过配置项指定的时间之后
                                搜索操作会被终止。
                            </entry>
                        </row>
                        <row>
                            <entry>LDAPConnectTim&#x200B;eout</entry>
                            <entry>LDAP查询时连接的超时时间</entry>
                            <entry>整数</entry>
                            <entry>30</entry>
                            <entry>
                                LDAP查询时连接LDAP服务器的超时限制，超过配置项指
                                定的时间之后，连接会被终止。
                            </entry>
                        </row>
                        <row>
                            <entry>LocalAdminPassw&#x200B;ord</entry>
                            <entry>admin@local用户的密码</entry>
                            <entry>密码</entry>
                            <entry>&MANAGER;安装时设置</entry>
                            <entry>admin@local用户的密码</entry>
                        </row>
                        <row>
                            <entry>
                                LogPhysicalMemo&#x200B;ryThresholdInMB
                            </entry>
                            <entry>
                                主机被认为内存不足的剩余内存下限（以MB为单位）
                            </entry>
                            <entry>整数</entry>
                            <entry>1024</entry>
                            <entry>
                                主机剩余内存低于配置项指定的数值时，会被认为是内
                                存不足。当主机剩余内存低于下限时，该事件会记录到
                                审计日志，不会对主机本身进行任何其他操作。
                            </entry>
                        </row>
                        <row>
                            <entry>
                                LowUtilizationForE&#x200B;venlyDistribute
                            </entry>
                            <entry>
                                使用even负载均衡策略时，运行虚拟机数目的下限
                            </entry>
                            <entry>整数</entry>
                            <entry>0</entry>
                            <entry>
                                使用even负载均衡策略时，每台主机运行虚拟机的最小
                                数量。
                            </entry>
                        </row>
                        <row>
                            <entry>LowUtilizationForP&#x200B;owerSave</entry>
                            <entry>
                                使用PowerSave负载均衡策略时，主机CPU使用率的下限
                            </entry>
                            <entry>整数</entry>
                            <entry>20</entry>
                            <entry>
                                对于新创建的集群生效。使用PowerSave负载均衡策略
                                时，主机CPU使用率的下限。
                            </entry>
                        </row>
                        <row>
                            <entry>MacPoolRange</entry>
                            <entry>MAC地址区间</entry>
                            <entry>字符串</entry>
                            <entry>
                                00:1a:4a:f1:3a:00&#x200B;
                                -&#x200B;
                                00:1a:4a:f1:3a:ff
                            </entry>
                            <entry>
                                虚拟机网卡的MAC地址从配置项指定的地址区间中分
                                配。
                            </entry>
                        </row>
                        <row>
                            <entry>MaxMacsCountInP&#x200B;ool</entry>
                            <entry>MAC地址区间中MAC地址数量的上限</entry>
                            <entry>整数</entry>
                            <entry>100000</entry>
                            <entry>
                                MAC地址区间中MAC地址数量的上限。
                            </entry>
                        </row>
                        <row>
                            <entry>MaxNumberofHost&#x200B;sInStoragePool</entry>
                            <entry>存储域中主机的最大数量</entry>
                            <entry>整数</entry>
                            <entry>250</entry>
                            <entry>
                                一个数据中心中添加的主机数量的上限。如有需要，经
                                过测试之后，可以增加配置项指定的数值。
                            </entry>
                        </row>
                        <row>
                            <entry>MaxNumOfCpuPer&#x200B;Socket</entry>
                            <entry>虚拟机中一个Socket中CPU核心的上限</entry>
                            <entry>整数</entry>
                            <entry>16</entry>
                            <entry>
                                虚拟机中，一个Socket中分配虚拟CPU核心的上限。
                            </entry>
                        </row>
                        <row>
                            <entry>MaxNumOfVMCpu&#x200B;s</entry>
                            <entry>虚拟机中虚拟CPU核心数量的上限</entry>
                            <entry>整数</entry>
                            <entry>160</entry>
                            <entry>
                                单台虚拟机分配虚拟CPU核心的上限（虚拟机CPU核心的
                                数量，等于每个Socket中CPU核心的数量乘以Socket的
                                数量。
                            </entry>
                        </row>
                        <row>
                            <entry>MaxNumofVmSock&#x200B;ets</entry>
                            <entry>虚拟机中Socket数量的上限</entry>
                            <entry>整数</entry>
                            <entry>16</entry>
                            <entry>单台虚拟机中CPU Socket数量的上限。</entry>
                        </row>
                        <row>
                            <entry>MaxRerunVmOnV&#x200B;dsCount</entry>
                            <entry>
                                虚拟机在一台主机上尝试重新运行次数的上限
                            </entry>
                            <entry>整数</entry>
                            <entry>3</entry>
                            <entry>
                                虚拟机在主机上尝试重新运行次数的上限，重试次数超
                                过上限之后，主机会提示虚拟机无法运行的错误信息。
                            </entry>
                        </row>
                        <row>
                            <entry>MaxScheduler&#200B;Weight</entry>
                            <entry>单一调度模块权值的上限</entry>
                            <entry>整数</entry>
                            <entry>1000</entry>
                            <entry>
                                单一调度模块权值的上限。
                            </entry>
                        </row>
                        <row>
                            <entry>MaxStorageVdsD&#x200B;elayCheckSec</entry>
                            <entry>
                                检查存储域状态的最大延时时间（以秒为单位）
                            </entry>
                            <entry>整数</entry>
                            <entry>5</entry>
                            <entry>
                                将确认存储域状态异常之前等待检测结果返回的最大延
                                时时间。
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
        </section>
    </section>
</chapter>

